{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import service from\"./service.js\";import Login from\"./Login.js\";import Register from\"./Register.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[page,setPage]=useState(()=>localStorage.getItem(\"token\")?\"home\":\"login\");const[newTodo,setNewTodo]=useState(\"\");const[todos,setTodos]=useState([]);async function getTodos(){const items=await service.getTasks();setTodos(items);}useEffect(()=>{if(page===\"home\")getTodos();},[page]);// דפי AUTH\nif(page===\"login\")return/*#__PURE__*/_jsx(Login,{onLogin:p=>setPage(p||\"home\")});if(page===\"register\")return/*#__PURE__*/_jsx(Register,{onRegister:()=>setPage(\"login\")});// דף ראשי\nreturn/*#__PURE__*/_jsxs(\"section\",{className:\"todoapp\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"todos\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{localStorage.removeItem(\"token\");setPage(\"login\");},children:\"Logout\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:async e=>{e.preventDefault();await service.addTask(newTodo);setNewTodo(\"\");await getTodos();},children:/*#__PURE__*/_jsx(\"input\",{className:\"new-todo\",placeholder:\"Add task\",value:newTodo,onChange:e=>setNewTodo(e.target.value)})})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"todo-list\",children:todos.map(todo=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",defaultChecked:todo.isComplete,onChange:e=>service.setCompleted(todo.id,e.target.checked).then(getTodos)}),/*#__PURE__*/_jsx(\"label\",{children:todo.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>service.deleteTask(todo.id).then(getTodos),children:\"X\"})]},todo.id))})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","service","Login","Register","jsx","_jsx","jsxs","_jsxs","App","page","setPage","localStorage","getItem","newTodo","setNewTodo","todos","setTodos","getTodos","items","getTasks","onLogin","p","onRegister","className","children","onClick","removeItem","onSubmit","e","preventDefault","addTask","placeholder","value","onChange","target","map","todo","type","defaultChecked","isComplete","setCompleted","id","checked","then","name","deleteTask"],"sources":["C:/Users/user1/OneDrive/מסמכים/לימודים/פרקטיקוד/task4.1/ToDoListReact/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport service from \"./service.js\";\r\nimport Login from \"./Login.js\";\r\nimport Register from \"./Register.js\";\r\n\r\nfunction App() {\r\n  const [page, setPage] = useState(() =>\r\n    localStorage.getItem(\"token\") ? \"home\" : \"login\"\r\n  );\r\n\r\n  const [newTodo, setNewTodo] = useState(\"\");\r\n  const [todos, setTodos] = useState([]);\r\n\r\n  async function getTodos() {\r\n    const items = await service.getTasks();\r\n    setTodos(items);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (page === \"home\") getTodos();\r\n  }, [page]);\r\n\r\n  // דפי AUTH\r\n  if (page === \"login\") return <Login onLogin={(p) => setPage(p || \"home\")} />;\r\n  if (page === \"register\") return <Register onRegister={() => setPage(\"login\")} />;\r\n\r\n  // דף ראשי\r\n  return (\r\n    <section className=\"todoapp\">\r\n      <header className=\"header\">\r\n        <h1>todos</h1>\r\n\r\n        <button onClick={() => { localStorage.removeItem(\"token\"); setPage(\"login\"); }}>\r\n          Logout\r\n        </button>\r\n\r\n        <form onSubmit={async (e) => {\r\n          e.preventDefault();\r\n          await service.addTask(newTodo);\r\n          setNewTodo(\"\");\r\n          await getTodos();\r\n        }}>\r\n          <input className=\"new-todo\" placeholder=\"Add task\" value={newTodo} onChange={(e) => setNewTodo(e.target.value)} />\r\n        </form>\r\n      </header>\r\n\r\n      <ul className=\"todo-list\">\r\n        {todos.map((todo) => (\r\n          <li key={todo.id}>\r\n            <input type=\"checkbox\"\r\n              defaultChecked={todo.isComplete}\r\n              onChange={(e) => service.setCompleted(todo.id, e.target.checked).then(getTodos)}\r\n            />\r\n            <label>{todo.name}</label>\r\n            <button onClick={() => service.deleteTask(todo.id).then(getTodos)}>X</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}